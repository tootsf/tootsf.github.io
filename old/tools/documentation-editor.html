<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Bridge Documentation Editor</title>
    <link rel="stylesheet" href="documentation-editor.css">
    <link rel="icon" href="../favicon.ico">
</head>
<body>
    <div class="editor-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>📖 Documentation Editor</h2>
                <button id="theme-toggle" class="theme-toggle">🌙</button>
            </div>

            <div class="module-selector">
                <label for="module-select">Select Module:</label>
                <select id="module-select">
                    <option value="">Choose a module...</option>
                </select>
                <button id="create-new-module" class="create-btn">➕ New Module</button>
            </div>

            <div class="file-status">
                <div class="status-item">
                    <span class="status-label">Documentation:</span>
                    <span id="docs-status" class="status-indicator">●</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Functions:</span>
                    <span id="functions-status" class="status-indicator">●</span>
                </div>
            </div>

            <div class="function-summary">
                <h3>Functions</h3>
                <div id="function-counts">
                    <span class="function-count">Client: <span id="client-count">0</span></span>
                    <span class="function-count">Server: <span id="server-count">0</span></span>
                </div>
                <button id="manage-functions" class="manage-btn">Manage Functions</button>
            </div>

            <div class="actions">
                <button id="save-all" class="save-btn">💾 Save All</button>
                <button id="publish-github" class="publish-btn">🚀 Publish to GitHub</button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="editor-header">
                <div class="module-info">
                    <h1 id="module-title">Select a module to begin editing</h1>
                    <p id="module-description">Choose a module from the sidebar to start editing its documentation.</p>
                </div>
                <div class="editor-controls">
                    <button id="preview-toggle" class="toggle-btn">👁️ Preview</button>
                    <button id="toc-editor" class="toggle-btn">📋 Edit TOC</button>
                </div>
            </div>

            <div class="editor-tabs">
                <button class="tab-btn active" data-tab="frontmatter">⚙️ Settings</button>
                <button class="tab-btn" data-tab="content">📝 Content</button>
                <button class="tab-btn" data-tab="preview">👁️ Preview</button>
            </div>

            <div class="editor-content">                <!-- Frontmatter Tab -->
                <div id="frontmatter-tab" class="tab-content active">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="page-title">Page Title:</label>
                            <input type="text" id="page-title" placeholder="e.g., 🔑 Vehicle Key">
                            <small>The title shown in navigation and at the top of the page</small>
                        </div>
                        <div class="form-group">
                            <label for="nav-order">Navigation Order:</label>
                            <input type="number" id="nav-order" placeholder="1">
                            <small>Order in the navigation menu (lower numbers appear first)</small>
                        </div>
                        <div class="form-group">
                            <label for="permalink">Permalink:</label>
                            <input type="text" id="permalink" placeholder="/community_bridge/modules/vehiclekey/">
                            <small>URL path for this page (used by your custom routing system)</small>
                        </div>
                        <div class="form-group checkbox-group">
                            <label>
                                <input type="checkbox" id="has-children"> Has Children Pages
                            </label>
                            <small>Check if this module has sub-pages</small>
                        </div>
                        <div class="form-group">
                            <label for="layout">Layout:</label>
                            <select id="layout">
                                <option value="default">Default</option>
                                <option value="page">Page</option>
                                <option value="module">Module</option>
                            </select>
                            <small>Template layout to use for rendering</small>
                        </div>
                    </div>
                </div>

                <!-- Content Tab -->
                <div id="content-tab" class="tab-content">
                    <div class="editor-container">
                        <textarea id="markdown-editor" placeholder="Write your documentation content here..."></textarea>
                    </div>
                </div>

                <!-- Preview Tab -->
                <div id="preview-tab" class="tab-content">
                    <div id="markdown-preview" class="preview-container">
                        <p>Preview will appear here when you start editing...</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- TOC Panel -->
        <aside class="toc-panel">
            <div class="toc-header">
                <h3>📋 Table of Contents</h3>
                <button id="toc-refresh" class="refresh-btn">🔄</button>
            </div>
            <div id="toc-content" class="toc-content">
                <p>TOC will be generated from your content...</p>
            </div>
        </aside>
    </div>

    <!-- Modals -->
    <div id="function-manager-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content function-manager">
            <div class="modal-header">
                <h3>🔧 Function Manager</h3>
                <button class="modal-close">×</button>
            </div>
            <div class="modal-body">
                <div class="function-actions">
                    <button id="add-client-function" class="add-btn client">➕ Client Function</button>
                    <button id="add-server-function" class="add-btn server">➕ Server Function</button>
                    <button id="generate-docs" class="generate-btn">📄 Generate Docs</button>
                </div>
                <div id="functions-list" class="functions-list">
                    <!-- Functions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <div id="toc-editor-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content toc-editor">
            <div class="modal-header">
                <h3>📋 TOC Editor</h3>
                <button class="modal-close">×</button>
            </div>
            <div class="modal-body">
                <div class="toc-actions">
                    <button id="auto-generate-toc" class="auto-btn">🤖 Auto-Generate</button>
                    <button id="add-custom-link" class="add-btn">➕ Custom Link</button>
                </div>
                <div id="toc-items" class="toc-items">
                    <!-- TOC items will be populated here -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="save-toc" class="save-btn">💾 Save TOC</button>
                <button class="modal-close cancel-btn">Cancel</button>
            </div>
        </div>
    </div>

    <script src="documentation-editor.js"></script>
</body>
</html>

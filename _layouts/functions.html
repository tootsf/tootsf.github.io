---
layout: default
---

<script>
document.body.classList.add('layout-functions');
</script>

{{ content }}
    tocContainer.appendChild(tocTitle);

    // Create TOC list
    var tocList = document.createElement('ul');

    for (var i = 0; i < headings.length; i++) {
      var heading = headings[i];

      // Create unique ID for heading if it doesn't have one
      if (!heading.id) {
        var text = heading.textContent.trim();
        heading.id = text.toLowerCase()
          .replace(/[^a-z0-9\s-]/g, '')
          .replace(/\s+/g, '-')
          .replace(/-+/g, '-')
          .replace(/^-|-$/g, '');
      }

      // Create TOC list item
      var listItem = document.createElement('li');
      var link = document.createElement('a');

      // Extract function name from heading
      var functionName = heading.textContent.trim();

      // Handle format: [[FunctionName](link/)](link)
      if (functionName.indexOf('[[') === 0 && functionName.indexOf('](') > -1) {
        var match = functionName.match(/\[\[([^\]]+)\]/);
        if (match) {
          functionName = match[1];
        }
      }
      // Handle simple format: [FunctionName](link)
      else if (functionName.indexOf('[') === 0 && functionName.indexOf('](') > -1) {
        functionName = functionName.substring(1, functionName.indexOf(']('));
      }      link.href = '#' + heading.id;
      link.textContent = functionName;

      listItem.appendChild(link);
      tocList.appendChild(listItem);
    }

    tocContainer.appendChild(tocList);

    // Insert TOC
    insertTOC(tocContainer);
  }

  function insertTOC(tocContainer) {
    // Find the main content wrapper
    var mainContentWrap = document.querySelector('.main-content-wrap');
    var mainContent = document.querySelector('.main-content');

    console.log('Main content wrap:', mainContentWrap);
    console.log('Main content:', mainContent);

    if (mainContentWrap && mainContent) {
      // Add toc-layout class to main-content-wrap
      mainContentWrap.classList.add('toc-layout');

      // Add class to main content for styling
      mainContent.classList.add('content-with-toc');

      // Insert TOC after main content
      mainContent.parentNode.insertBefore(tocContainer, mainContent.nextSibling);      console.log('TOC added to page successfully');

      // Add event listeners
      addTOCEventListeners(tocContainer);
    } else {
      console.log('Could not find main content elements');
    }
  }

  function addTOCEventListeners(tocContainer) {
    // Add smooth scrolling for TOC links
    tocContainer.addEventListener('click', function(e) {
      if (e.target.tagName === 'A') {
        e.preventDefault();
        var target = document.querySelector(e.target.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      }
    });
  }
})();
</script>
